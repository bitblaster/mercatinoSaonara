<?xml version="1.0"?>
<project name="test" default="rebuild" basedir=".">

 		 <property name="deploy" value="deploy"/>
 		 <property name="dest" value="${deploy}/war"/>
		 <property name="dest_lib" value="${dest}/WEB-INF/lib"/>
		 <property name="dest_classes" value="${dest}/WEB-INF/classes"/>

		 <target name="make_jar">
			<copy todir="${dest}">
		      <fileset dir="war">
		        <include name="**/*.*"/>
		      </fileset>
		    </copy>
		    
		    <mkdir dir="${dest_lib}"/>

		 		<!-- JWOLF -->
		    <jar basedir="../JWolf/bin" 
		         jarfile="${dest_lib}/jwolf.jar" 
		         includes="**/*.*"/>
		    <copy todir="${dest_lib}">
		      <fileset dir="../JWolf/lib">
		        <include name="**/*.jar"/>
		        <exclude name="cicsj2ee*.jar"/>
		      </fileset>
		    </copy>

		 		<!-- JWOLFGWT -->
		    <jar basedir="../JwolfGWT/bin"
		         jarfile="${dest_lib}/jwolfGWT.jar" 
		         includes="**/*.*"/>
		    <copy todir="${dest_lib}">
		      <fileset dir="../JwolfGWT/lib">
		        <include name="**/*.jar"/>
		        <exclude name="easymock*.jar"/>
		        <exclude name="powermock*.jar"/>
		        <exclude name="slf4j*.jar"/>
		        <exclude name="smartgwt*.jar"/>
		        <exclude name="junit*.jar"/>
		      </fileset>
		    </copy>

     		<!-- <delete dir="${dest_classes}"/> -->

	 		<delete dir="${dest}/logs"/>
	 		<mkdir dir="${dest}/logs"/>
	 	
			<war basedir="${dest}" 
			     jarfile="${deploy}/mercatinolibri.war" 
			     includes="**/*.*"/>

			<delete dir="${dest}"/>
		 </target>
     
		 <target name="clean">
			<delete dir="${dest}"/>
			<delete file="${deploy}/mercatinolibri.war"/>
 	     </target>
          
		 <target name="rebuild" depends="clean,make_jar" />
</project>


